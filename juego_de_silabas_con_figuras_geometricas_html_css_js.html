<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Juego: Aprendo S√≠labas con Figuras</title>
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --accent:#60a5fa; --muted:#94a3b8; --success:#34d399; --danger:#fb7185;
      --glass: rgba(255,255,255,0.04);
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;min-height:100vh;background:linear-gradient(180deg,var(--bg),#071027);color:#e6eef8;display:flex;align-items:center;justify-content:center;padding:24px}
    .app{max-width:980px;width:100%;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:16px;padding:18px;box-shadow:0 8px 30px rgba(2,6,23,0.6);}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px}
    header h1{font-size:20px;margin:0}
    header p{margin:0;color:var(--muted);font-size:13px}

    .top{display:flex;gap:16px;margin-top:14px;align-items:center}
    .panel{flex:1;background:var(--card);padding:14px;border-radius:12px}

    .target{display:flex;flex-direction:column;gap:10px;align-items:center}
    .hint{font-size:28px;letter-spacing:6px;font-weight:700}
    .emoji{font-size:48px}
    .blanks{display:flex;gap:8px}
    .blank{min-width:56px;background:var(--glass);padding:10px;border-radius:8px;text-align:center;font-weight:700;font-size:18px}

    .shapes{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin-top:16px}
    .shape{width:86px;height:86px;display:flex;align-items:center;justify-content:center;color:#071027;font-weight:700;cursor:pointer;user-select:none;transition:transform .18s ease, box-shadow .18s;box-shadow:0 6px 18px rgba(2,6,23,0.6);}
    .shape:active{transform:translateY(3px)}
    .shape.small{width:72px;height:72px}
    .shape.disabled{opacity:.35;pointer-events:none}
    .shape .syll{font-size:18px}

    /* geometric shapes via clip-path */
    .circle{border-radius:999px}
    .square{border-radius:14px}
    .triangle{clip-path:polygon(50% 0%,0% 100%,100% 100%);}
    .pentagon{clip-path:polygon(50% 0%,95% 35%,77% 100%,23% 100%,5% 35%)}
    .hexagon{clip-path:polygon(25% 0%,75% 0%,100% 50%,75% 100%,25% 100%,0% 50%)}
    .diamond{transform:rotate(45deg);border-radius:6px}

    .controls{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    button.btn{background:var(--accent);border:none;padding:8px 12px;border-radius:10px;color:#032;cursor:pointer;font-weight:700}
    button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}

    .status{display:flex;gap:12px;align-items:center}
    .score{font-size:14px}

    footer{margin-top:14px;color:var(--muted);font-size:13px}

    /* small screens */
    @media (max-width:700px){
      .shape{width:64px;height:64px}
      .hint{font-size:22px}
    }
  </style>
</head>
<body>
  <div class="app" role="application" aria-label="Juego de s√≠labas con figuras geom√©tricas">
    <header>
      <div>
        <h1>Juego: Aprendo s√≠labas ‚Äî Figuras geom√©tricas</h1>
        <p>Haz clic en las figuras para formar la palabra. Completa la palabra en el orden correcto.</p>
      </div>
      <div class="status">
        <div class="score">Puntuaci√≥n: <strong id="score">0</strong></div>
        <div class="tries">Intentos: <strong id="tries">0</strong></div>
      </div>
    </header>

    <div class="top" style="margin-top:12px">
      <div class="panel target" style="flex-basis:40%">
        <div class="emoji" id="hintEmoji">üè†</div>
        <div class="hint" id="targetLabel">_ _ _ _</div>
        <div class="blanks" id="blanks"></div>
      </div>

      <div class="panel" style="flex-basis:60%">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <strong>Figuras</strong>
            <div style="font-size:12px;color:var(--muted)">Haz clic para a√±adir s√≠labas. Puedes borrar con retroceso.</div>
          </div>
          <div class="controls">
            <button class="btn" id="shuffleBtn">Mezclar</button>
            <button class="ghost" id="hintBtn">Mostrar s√≠laba inicial</button>
            <button class="ghost" id="resetBtn">Reiniciar</button>
          </div>
        </div>

        <div class="shapes" id="shapes"></div>

        <div style="margin-top:12px;display:flex;gap:8px;align-items:center;justify-content:center">
          <div style="background:var(--glass);padding:8px;border-radius:10px;min-width:260px;text-align:center">
            <div style="font-size:14px;color:var(--muted);">Construcci√≥n</div>
            <div id="assembly" style="font-weight:800;letter-spacing:2px;font-size:18px;padding-top:6px"> </div>
          </div>
          <button class="btn" id="submitBtn">Comprobar</button>
          <button class="ghost" id="backspaceBtn">‚å´</button>
        </div>
      </div>
    </div>

    <footer>
      Sugerencia: personaliza la lista de palabras en el c√≥digo para adaptarlo al nivel de los estudiantes.
    </footer>
  </div>

  <script>
    // --- Datos: palabras sencillas divididas en s√≠labas y emoji como pista ---
    const WORDS = [
      {word:'casa', syll:['ca','sa'], emoji:'üè†'},
      {word:'gato', syll:['ga','to'], emoji:'üê±'},
      {word:'pato', syll:['pa','to'], emoji:'ü¶Ü'},
      {word:'mesa', syll:['me','sa'], emoji:'ü™ë'},
      {word:'cama', syll:['ca','ma'], emoji:'üõèÔ∏è'},
      {word:'sopa', syll:['so','pa'], emoji:'ü•£'},
      {word:'pelo', syll:['pe','lo'], emoji:'üíá'},
      {word:'luna', syll:['lu','na'], emoji:'üåô'},
      {word:'libro', syll:['li','bro'], emoji:'üìö'},
      {word:'rojo', syll:['ro','jo'], emoji:'üü•'}
    ];

    // Pool de s√≠labas (para mostrar distractores)
    const POOL = Array.from(new Set(WORDS.flatMap(w=>w.syll))).concat(['ma','ta','ri','so','cu','be','na']);

    // Elementos DOM
    const shapesEl = document.getElementById('shapes');
    const blanksEl = document.getElementById('blanks');
    const targetLabel = document.getElementById('targetLabel');
    const hintEmoji = document.getElementById('hintEmoji');
    const assemblyEl = document.getElementById('assembly');
    const scoreEl = document.getElementById('score');
    const triesEl = document.getElementById('tries');

    const shuffleBtn = document.getElementById('shuffleBtn');
    const hintBtn = document.getElementById('hintBtn');
    const resetBtn = document.getElementById('resetBtn');
    const submitBtn = document.getElementById('submitBtn');
    const backspaceBtn = document.getElementById('backspaceBtn');

    // Estado
    let current = null; // palabra actual
    let assembly = [];
    let score = 0;
    let tries = 0;

    // Formas disponibles
    const SHAPES = ['circle','square','triangle','pentagon','hexagon','diamond'];

    // ---------- Helpers ----------
    function randInt(n){return Math.floor(Math.random()*n)}
    function pickRandom(arr,n){const copy=[...arr];const out=[];for(let i=0;i<n;i++){if(copy.length==0)break;out.push(copy.splice(randInt(copy.length),1)[0])}return out}

    // inicializa nueva ronda
    function newRound(){
      assembly = [];
      assemblyEl.textContent = '';
      blanksEl.innerHTML = '';

      current = WORDS[randInt(WORDS.length)];
      // mostrar pista
      hintEmoji.textContent = current.emoji || '‚ùì';
      // mostrar guiones
      targetLabel.textContent = current.word.split('').map(_=>'_').join(' ');
      // blanks por cada s√≠laba (visualmente)
      current.syll.forEach(s=>{
        const b = document.createElement('div'); b.className='blank'; b.textContent = '____'; blanksEl.appendChild(b);
      });

      // preparar s√≠labas a mostrar: todas las s√≠labas necesarias + distractores
      const required = current.syll.slice();
      const distractors = pickRandom(POOL.filter(s=>!required.includes(s)), Math.max(3, SHAPES.length - required.length));
      const full = pickRandom(required.concat(distractors), SHAPES.length);

      renderShapes(full);
    }

    // renderiza botones con formas y s√≠labas
    function renderShapes(sylls){
      shapesEl.innerHTML = '';
      // map sylls to shape classes shuffled
      const list = sylls.slice();
      for(let i=0;i<list.length;i++){
        const syl = list[i];
        const shp = SHAPES[i%SHAPES.length];
        const el = document.createElement('button');
        el.className = `shape ${shp}`;
        el.style.background = randomPastel(i);
        el.setAttribute('data-syll', syl);
        el.setAttribute('aria-label', `S√≠laba ${syl}`);
        el.innerHTML = `<span class="syll">${syl}</span>`;
        el.addEventListener('click', ()=> onShapeClick(el));
        shapesEl.appendChild(el);
      }
    }

    function randomPastel(seed){
      const hues = [220,190,160,140,200,260,30,10,340];
      const h = hues[seed % hues.length];
      return `linear-gradient(135deg,hsl(${h} 60% 70% / 0.95), hsl(${(h+30)%360} 60% 60% / 0.95))`;
    }

    // al click en figura
    function onShapeClick(el){
      const syl = el.getAttribute('data-syll');
      assembly.push(syl);
      updateAssemblyView();
      // marcar la siguiente blank si viene
      markBlanks();

      // opcional: desactivar si ya usado demasiadas veces
      // podemos desactivar para evitar repetici√≥n
      // el.classList.add('disabled');
    }

    function updateAssemblyView(){
      assemblyEl.textContent = assembly.join('-');
    }

    function markBlanks(){
      const blanks = Array.from(blanksEl.children);
      blanks.forEach((b,i)=>{
        if(i < assembly.length) b.textContent = assembly[i]; else b.textContent = '____';
      });
    }

    // comprobar si arm√≥ la palabra correctamente
    function submit(){
      tries++;
      triesEl.textContent = tries;
      const assembled = assembly.join('');
      const target = current.syll.join('');
      if(assembled === target){
        score += 10;
        scoreEl.textContent = score;
        showToast('¬°Muy bien! Palabra correcta.');
        // peque√±a animaci√≥n de √©xito
        flashPanel('success');
        setTimeout(newRound,900);
      } else {
        score = Math.max(0, score-2);
        scoreEl.textContent = score;
        showToast('No coincide. Int√©ntalo de nuevo.');
        flashPanel('danger');
      }
      assembly = [];
      updateAssemblyView();
      markBlanks();
    }

    // retroceso
    function backspace(){
      assembly.pop();updateAssemblyView();markBlanks();
    }

    // mezclar las figuras
    function shuffle(){
      const sylls = Array.from(shapesEl.querySelectorAll('[data-syll]')).map(e=>e.getAttribute('data-syll'));
      const shuffled = pickRandom(sylls, sylls.length);
      renderShapes(shuffled);
    }

    // mostrar primera s√≠laba como ayuda
    function showHint(){
      assembly = []; assembly.push(current.syll[0]); updateAssemblyView(); markBlanks();
    }

    // reiniciar juego
    function resetAll(){
      score = 0; tries = 0; scoreEl.textContent = score; triesEl.textContent = tries; newRound();
    }

    // peque√±os efectos
    function showToast(text){
      const t = document.createElement('div'); t.textContent = text; t.style.position='fixed'; t.style.left='50%'; t.style.top='18px'; t.style.transform='translateX(-50%)'; t.style.background='rgba(6,12,23,0.85)'; t.style.padding='10px 14px'; t.style.borderRadius='10px'; t.style.boxShadow='0 6px 20px rgba(0,0,0,0.5)'; t.style.zIndex=9999; document.body.appendChild(t);
      setTimeout(()=>{t.style.transition='opacity .25s';t.style.opacity=0;setTimeout(()=>t.remove(),260)},900);
    }
    function flashPanel(kind){
      const el = document.querySelector('.app');
      if(kind==='success'){el.style.boxShadow='0 8px 40px rgba(52,211,153,0.12)';}
      else el.style.boxShadow='0 8px 40px rgba(251,113,133,0.12)';
      setTimeout(()=>el.style.boxShadow='0 8px 30px rgba(2,6,23,0.6)',700);
    }

    // eventos
    shuffleBtn.addEventListener('click', shuffle);
    hintBtn.addEventListener('click', showHint);
    resetBtn.addEventListener('click', resetAll);
    submitBtn.addEventListener('click', submit);
    backspaceBtn.addEventListener('click', backspace);

    // soporte teclado
    document.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter') submit();
      if(e.key === 'Backspace') {e.preventDefault(); backspace();}
      if(e.key === ' ') {e.preventDefault(); shuffle();}
    });

    // inicializar
    newRound();

    // --- Sugerencias para personalizar ---
    // 1) Cambia la constante WORDS para agregar m√°s vocabulario y s√≠labas.
    // 2) Ajusta la longitud de SHAPES o POOL para m√°s distractores.
    // 3) Puedes reemplazar el emoji por una imagen: a√±ade propiedad 'img' a cada palabra y mu√©strala en <img>.
  </script>
</body>
</html>
